" set temporary folders; create directories if they do not exist
set backupdir=~/.vimtmp/vimbackup//,/tmp//,.backup/
set directory=~/.vimtmp/vimswp//,/tmp//,.swp/
set undodir=~/.vimtemp/vimundo//,/tmp//,.undo/

function! CheckAndCreateDir(dir)
    if !isdirectory(a:dir)
        call mkdir(a:dir, "p")
    endif
endfunction

for dir in ["vimbackup","vimswp","vimundo"] 
    let hdir = $HOME . "/.vimtmp/" . dir
    call CheckAndCreateDir(hdir)
endfor

" Enable syntax and numbering
syntax enable
set number

" Set tab behaviors
set tabstop=4
set softtabstop=4
set shiftwidth=4
set expandtab 
set autoindent 

" Enable Folding
set foldmethod=indent
set foldlevel=99

" set vertical and horizontal splits
set splitbelow
set splitright

if !has('gui_running')
    set t_Co=256
endif 

" color schemes
if &diff
    colorscheme palenight
endif

set background=dark
colorscheme jellybeans

" lightline configuration
set laststatus=2
set noshowmode
let g:lightline = { 
\ 'colorscheme' : 'nord' ,
\ 'active' : {
\     'left' : [ ['mode', 'paste' ],
\                ['gitbranch', 'readonly', 'filename', 'modified' ] ]
\     },
\ 'component_function' : {
\     'gitbranch': 'gitbranch#name'
\     },
\ }

augroup filetypedetect
    " cheap Splunk hack, change .conf filetypes to read in
    " as .ini so there is some colorizations
    " change newline fileformat to unix because configs are cross platform
    au BufNewFile,BufRead *.conf,*/metadata/*.meta 
        \ setfiletype dosini |
        \ set fileformat=unix
    "Python files, we like unix formats
    "because scripts are cross platform
    au BufNewFile,BufRead *.py 
        \ set fileformat=unix |
        \ set textwidth=79
augroup END
